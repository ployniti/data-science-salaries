# Experience Level TABLE

The **experience** table holds the experience levels associated with each job listing.

- Schema: group5
- Table: experience
- Columns: experience_id, experience

[See Also: Acronyms & Definitions](../definitions/TABLE_OF_DEFINITIONS.md)

## CREATE TABLE Schema.EXPERIENCE

```sql
CREATE TABLE group5.experience (
		experience_id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
		experience CHAR(2) NOT NULL UNIQUE
);
```

## Verify Tables Structure

```sql
\d+ group5.experience
```

- Table Structure

```bash
                                                   Table "group5.experience"

    Column     |     Type     | Collation | Nullable |             Default              | Storage  | Stats target | Description
---------------+--------------+-----------+----------+----------------------------------+----------+--------------+-------------
 experience_id | integer      |           | not null | generated by default as identity | plain    |              |
 experience    | character(2) |           | not null |                                  | extended |              |

Indexes:
    "experience_pkey" PRIMARY KEY, btree (experience_id)
    "experience_experience_key" UNIQUE CONSTRAINT, btree (experience)
Access method: heap
```

## INSERT INTO Schema.Table

```sql
INSERT INTO group5.experience (experience)
VALUES ('SE'), ('MI'), ('EN'), ('EX');
```

- View Table

```sql
SELECT * FROM group5.experience;
```

```bash
 experience_id | experience
---------------+------------
             1 | SE
             2 | MI
             3 | EN
             4 | EX
(4 rows)
```

## View of MAIN Table Before ALTER & UPDATE

```sql
SELECT * FROM group5.main LIMIT 5;
```

```bash

 listing_id | work_year | experience | company_location | salary | remote_ratio | company_size | employee_residence |        job_title         | employment_type
------------+-----------+------------+------------------+--------+--------------+--------------+--------------------+--------------------------+-----------------
          1 |      2023 | SE         | ES               |  85847 |          100 | L            | ES                 | Principal Data Scientist | FT
          2 |      2023 | MI         | US               |  30000 |          100 | S            | US                 | ML Engineer              | CT
          3 |      2023 | MI         | US               |  25500 |          100 | S            | US                 | ML Engineer              | CT
          4 |      2023 | SE         | CA               | 175000 |          100 | M            | CA                 | Data Scientist           | FT
          5 |      2023 | SE         | CA               | 120000 |          100 | M            | CA                 | Data Scientist           | FT
(5 rows)
```

## CREATE REFERENTIAL FROM MAIN TO NEW TABLE

- ADD Reference (id) Column to MAIN

```sql
ALTER TABLE group5.main ADD COLUMN experience_id INT;
```

- Child Reference from MAIN Foreign Key to Parent Tables Primay Key (id)

```sql
UPDATE group5.main
SET experience_id = experience.experience_id
FROM group5.experience
WHERE group5.main.experience = group5.experience.experience;
```

- Drop Unreferenced Column from MAIN

```sql
ALTER TABLE group5.main DROP COLUMN experience;
```

- Add ON DELETE CASCADE to MAIN

```sql
ALTER TABLE group5.main
ADD CONSTRAINT experience_fk_listing
FOREIGN KEY (experience_id)
REFERENCES group5.experience (experience_id)
ON DELETE CASCADE;
```

## View of MAIN Table After ALTER & UPDATE

```sql
SELECT * FROM group5.main LIMIT 5;
```

```bash
 listing_id | work_year | company_location | salary | remote_ratio | company_size | employee_residence |        job_title         | employment_type | experience_id
------------+-----------+------------------+--------+--------------+--------------+--------------------+--------------------------+-----------------+---------------
          1 |      2023 | ES               |  85847 |          100 | L            | ES                 | Principal Data Scientist | FT              |             1
          2 |      2023 | US               |  30000 |          100 | S            | US                 | ML Engineer              | CT              |             2
          3 |      2023 | US               |  25500 |          100 | S            | US                 | ML Engineer              | CT              |             2
          4 |      2023 | CA               | 175000 |          100 | M            | CA                 | Data Scientist           | FT              |             1
          5 |      2023 | CA               | 120000 |          100 | M            | CA                 | Data Scientist           | FT              |             1
(5 rows)
```

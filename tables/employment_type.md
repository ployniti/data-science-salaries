# Employment Type TABLE

The **employment type** table holds the position offered as full-time, part-time, etc... for each job listing

- Schema: group5
- Table: employment_type
- Columns: type_id, type

[See Also: Acronyms & Definitions](../definitions/TABLE_OF_DEFINITIONS.md)

## CREATE TABLE Schema.EMPLOYMENT_TYPE

```sql
CREATE TABLE group5.employment_type (
	type_id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	type CHAR(2) NOT NULL UNIQUE
);

```

## Verify Tables Structure

```sql
\d+ group5.employment_type
```

- Table Structure

```bash
                                              Table "group5.employment_type"
 Column  |     Type     | Collation | Nullable |             Default              | Storage  | Stats target | Description
---------+--------------+-----------+----------+----------------------------------+----------+--------------+-------------
 type_id | integer      |           | not null | generated by default as identity | plain    |              |
 type    | character(2) |           | not null |                                  | extended |              |
Indexes:
    "employment_type_pkey" PRIMARY KEY, btree (type_id)
    "employment_type_type_key" UNIQUE CONSTRAINT, btree (type)
Access method: heap
```

## INSERT INTO Schema.Table

```sql
INSERT INTO group5.employment_type (type) VALUES ('FT'), ('PT'), ('CT'), ('FL');
```

- View Table

```sql
SELECT * FROM group5.employment_type;
```

```bash
 type_id | type
---------+------
       1 | FT
       2 | PT
       3 | CT
       4 | FL
(4 rows)
```

## View of MAIN Table Before ALTER & UPDATE

```sql
SELECT * FROM group5.main LIMIT 5;
```

```bash
 listing_id | employment_type | experience_id | work_year_id | location_id | salary_id | remote_ratio_id | size_id | residence_id | title_id
------------+-----------------+---------------+--------------+-------------+-----------+-----------------+---------+--------------+----------
        164 | FT              |             1 |            1 |           2 |        69 |               1 |       3 |            2 |        6
        165 | FT              |             1 |            1 |           2 |        70 |               1 |       3 |            2 |        6
        166 | FT              |             1 |            1 |           2 |       166 |               1 |       2 |            2 |       28
        167 | FT              |             1 |            1 |           2 |        19 |               1 |       2 |            2 |       28
        168 | FT              |             2 |            1 |           2 |        36 |               1 |       2 |            2 |       32
(5 rows)
```

## CREATE REFERENTIAL FROM MAIN TO NEW TABLE

- ADD Reference (id) Column to MAIN

```sql
ALTER TABLE group5.main ADD COLUMN type_id INT;
```

- Child Reference from MAIN Foreign Key to Parent Tables Primay Key (id)

```sql
UPDATE group5.main
SET type_id = employment_type.type_id
FROM group5.employment_type
WHERE group5.main.employment_type = group5.employment_type.type;

```

- Drop Unreferenced Column from MAIN

```sql
ALTER TABLE group5.main DROP COLUMN employment_type;
```

- Add ON DELETE CASCADE to MAIN

```sql
ALTER TABLE group5.main
ADD CONSTRAINT employment_type_fk_listing
FOREIGN KEY (type_id)
REFERENCES group5.employment_type (type_id)
ON DELETE CASCADE;

```

## View of MAIN Table After ALTER & UPDATE

```sql
SELECT * FROM group5.main LIMIT 50;
```

```bash
 listing_id | experience_id | work_year_id | location_id | salary_id | remote_ratio_id | size_id | residence_id | title_id | type_id
------------+---------------+--------------+-------------+-----------+-----------------+---------+--------------+----------+---------
        164 |             1 |            1 |           2 |        69 |               1 |       3 |            2 |        6 |       1
       1434 |             1 |            1 |           2 |       193 |               1 |       2 |            2 |        4 |       1
        165 |             1 |            1 |           2 |        70 |               1 |       3 |            2 |        6 |       1
        166 |             1 |            1 |           2 |       166 |               1 |       2 |            2 |       28 |       1
       1939 |             1 |            2 |           2 |        13 |               1 |       2 |            2 |       32 |       1
```

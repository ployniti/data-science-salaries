# Remote Ratio TABLE

The **remote ratio** table holds the ratio of remote jobs to on site for job listings

- Schema: group5
- Table: remote_ratio
- Columns: remote_ratio_id, remote_ratio

[See Also: Acronyms & Definitions](../definitions/TABLE_OF_DEFINITIONS.md)

## CREATE TABLE Schema.REMOTE_RATIO

```sql
CREATE TABLE group5.remote_ratio (
	remote_ratio_id INT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	remote_ratio INT NOT NULL UNIQUE
);

```

## Verify Tables Structure

```sql
\d+ group5.remote_ratio
```

- Table Structure

```bash
                                                Table "group5.remote_ratio"
     Column      |  Type   | Collation | Nullable |             Default              | Storage | Stats target | Description
-----------------+---------+-----------+----------+----------------------------------+---------+--------------+-------------
 remote_ratio_id | integer |           | not null | generated by default as identity | plain   |              |
 remote_ratio    | integer |           | not null |                                  | plain   |              |
Indexes:
    "remote_ratio_pkey" PRIMARY KEY, btree (remote_ratio_id)
    "remote_ratio_remote_ratio_key" UNIQUE CONSTRAINT, btree (remote_ratio)
Access method: heap
```

## INSERT INTO Schema.Table

```sql
INSERT INTO group5.remote_ratio (remote_ratio) VALUES (0), (50), (100);
```

- View Table

```sql
SELECT * FROM group5.remote_ratio;
```

```bash
 remote_ratio_id | remote_ratio
-----------------+--------------
               1 |            0
               2 |           50
               3 |          100
(3 rows)
```

## View of MAIN Table Before ALTER & UPDATE

```sql
SELECT * FROM group5.main LIMIT 5;
```

```bash
 listing_id | remote_ratio | company_size | employee_residence |             job_title             | employment_type | experience_id | work_year_id | location_id | salary_id
------------+--------------+--------------+--------------------+-----------------------------------+-----------------+---------------+--------------+-------------+-----------
         82 |          100 | M            | PT                 | Machine Learning Engineer         | FT              |             1 |            1 |           2 |        19
         83 |          100 | S            | IN                 | Applied Machine Learning Engineer | FT              |             2 |            1 |           4 |        83
         84 |           50 | L            | IN                 | AI Developer                      | FT              |             3 |            2 |           7 |        84
         85 |          100 | L            | NL                 | Machine Learning Engineer         | FT              |             2 |            1 |           9 |        85
         86 |            0 | M            | US                 | Business Intelligence Engineer    | FT              |             1 |            1 |           2 |        86
(5 rows)
```

## CREATE REFERENTIAL FROM MAIN TO NEW TABLE

- ADD Reference (id) Column to MAIN

```sql
ALTER TABLE group5.main ADD COLUMN remote_ratio_id INT;
```

- Child Reference from MAIN Foreign Key to Parent Tables Primay Key (id)

```sql
UPDATE group5.main
SET remote_ratio_id = remote_ratio.remote_ratio_id
FROM group5.remote_ratio
WHERE group5.main.remote_ratio = group5.remote_ratio.remote_ratio;

```

- Drop Unreferenced Column from MAIN

```sql
ALTER TABLE group5.main DROP COLUMN remote_ratio;
```

- Add ON DELETE CASCADE to MAIN

```sql
ALTER TABLE group5.main
ADD CONSTRAINT remote_ratio_fk_listing
FOREIGN KEY (remote_ratio_id)
REFERENCES group5.remote_ratio (remote_ratio_id)
ON DELETE CASCADE;

```

## View of MAIN Table After ALTER & UPDATE

```sql
SELECT * FROM group5.main LIMIT 5;
```

```bash
 listing_id | company_size | employee_residence |             job_title             | employment_type | experience_id | work_year_id | location_id | salary_id | remote_ratio_id
------------+--------------+--------------------+-----------------------------------+-----------------+---------------+--------------+-------------+-----------+-----------------
        342 | M            | US                 | Data Engineer                     | FT              |             3 |            1 |           2 |       103 |               1
         82 | M            | PT                 | Machine Learning Engineer         | FT              |             1 |            1 |           2 |        19 |               3
       1725 | M            | US                 | ML Engineer                       | FT              |             1 |            1 |           2 |       378 |               1
         83 | S            | IN                 | Applied Machine Learning Engineer | FT              |             2 |            1 |           4 |        83 |               3
         84 | L            | IN                 | AI Developer                      | FT              |             3 |            2 |           7 |        84 |               2
(5 rows)
```
